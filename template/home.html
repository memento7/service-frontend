{% extends '/layouts/default.html' %}
{% import "/macros/event_tile.html" as event_tile %}

{% block title %}메멘토 - 그 사람에 대한 모든 정보{% endblock %}

{% block head %}
	{{ super() }}

	<meta property="og:image" content="/images/cover.png">
	<link rel="stylesheet" href="/css/home.css">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/css/swiper.min.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/js/swiper.min.js"></script>

{% endblock %}


{% block content %}
	<div class="background"></div>

	<section id="search">
		<div class="search-box clearfix">
			<input class="fl" type="text" name="q">
			<i class="fa fa-search fr"></i>
		</div>
	</section>

	<section id="trendy-people">
		<div class="swiper-container">
			<div class="swiper-wrapper">
				{% set s = ((people | length) / 4) |round(0, 'ceil') | int %}
				{% for person_group in people.values() | slice(s) %}
				
				<div class="swiper-slide">
					<ul>
						{% for person in person_group %}
						<a href="/people/{{ person.id }}">
							<li>
								<div class="image" style="{{ first_image(person.images, True) }}"></div>
								<h4>{{ person.nickname }}</h4>
								<div class="role">{{ (person.get_role().values() | first).name }}</div>

								{% if person.status == 4 %}
								<div style="color: #ffe8b0; font-size: 10px">(가데이터)</div>
								{% endif %}
							</li>
						</a>
						{% endfor %}
					</ul>
				</div>
				{% endfor %}
			</div>
			<div class="swiper-button-prev swiper-button-white"></div>
			<div class="swiper-button-next swiper-button-white"></div>
		</div>

		<script type="text/javascript">
			var swiper = new Swiper('.swiper-container', {
				nextButton: '.swiper-button-next',
				prevButton: '.swiper-button-prev',
			});

			function resizeSlide() {
				var liDom = $('#trendy-people ul li')
				var rest = $('#trendy-people .swiper-wrapper').width() - liDom.width() * 4;
				liDom.css({
					'margin-left':  (rest / 8) + 'px',
					'margin-right': (rest / 8) + 'px'
				});
			}
			resizeSlide();
			$(window).on('resize', resizeSlide);

		</script>
	</section>

	<section id="watchable-event" class="common-tile">
		<h3>볼만한 사건들</h3>
		{# <a href="/events">
			<i class="fa fa-angle-right view-more"></i>
		</a> #}

		<div class="content clearfix">
			{% for event in events.values() %}
				{% if loop.index <= 3 %}
					{{ event_tile.mini_event_tile(event) }}
				{% endif %}

			{% endfor %}
		</div>
	</section>

	<section id="day-3years-ago" class="common-tile">
		<h3>3년전 오늘</h3>
		<div class="content clearfix">
			<div class="no-content">이벤트가 없습니다</div>
		</div>
	</section>
{% endblock %}

